<!DOCTYPE html>
<html>
<head>
<!-- 2016-09-28 Wed 15:59 -->
<meta  charset="utf-8">
<meta  name="viewport" content="width=device-width, initial-scale=1">
<title>Play With Bash</title>
<meta  name="generator" content="Org-mode">
<meta  name="author" content="WANG Xiaolin">
<meta  name="description" content="A basic bash tutorial by examples"
>
<meta  name="keywords" content="bash, shell-scripting, linux">
<link rel="stylesheet" href="http://cs2.swfu.edu.cn/org-info-js/org-manual.css" type="text/css">
<style>code {font-family:Monospace; font-size:90%; background-color: #eee} body {font-size:14pt}</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Play With Bash</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline34">1. Basic Commands and Concepts</a></li>
<li><a href="#orgheadline48">2. Bash Programming Examples</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-2">
<h2 id="orgheadline34"><span class="section-number-2">1</span> Basic Commands and Concepts</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> Understanding The File System</h3>
<div class="outline-text-3" id="text-1-1">

<div class="figure">
<p><img src="./cs2.png" alt="cs2.png" width="100%">
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">1.2</span> Must Known Commands</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li><p>
Where I am?
</p>
<pre class="example">
pwd
</pre></li>
<li><p>
What do I have?
</p>
<pre class="example">
ls
</pre></li>
<li><p>
Go to somewhere
</p>
<pre class="example">
cd /usr/share/doc
</pre>
<p>
and see what's in it:
</p>
<pre class="example">
ls
</pre>
<p>
Now, go home:
</p>
<pre class="example">
cd
</pre></li>
</ul>

<ul class="org-ul">
<li><p>
I want to have a new folder for my homework
</p>
<pre class="example">
mkdir homework
</pre>
<p>
Now, get into this newly created directory:
</p>
<pre class="example">
cd homework
</pre></li>
</ul>

<ul class="org-ul">
<li><p>
Write a c program:
</p>
<pre class="example">
cat &gt; hello.c
#include&lt;stdio.h&gt;
int main(){
  printf("Hello, world!\n");
  return 0;
}
</pre>
<p>
Now, type "<code>Ctrl-d</code>" to quit.
</p></li>
</ul>

<ul class="org-ul">
<li><p>
And check what's in my <code>homework</code> directory:
</p>
<pre class="example">
ls
</pre>
<p>
To compile this <code>hello.c</code> source file:
</p>
<pre class="example">
gcc hello.c -o hello
</pre>
<p>
Now, you can run the newly generated <code>hello</code> program:
</p>
<pre class="example">
./hello
</pre></li>
<li><p>
Here is a more easy way to say "Hello, world":
</p>
<pre class="example">
echo Hello, world
</pre></li>
</ul>

<ul class="org-ul">
<li><p>
The commands you've learnt so far
</p>
<pre class="example">
pwd, ls, cd, mkdir, cat, gcc, echo
</pre>
<p>
And you can already do some simple work!
</p>

<p>
Now let's have some more&#x2026;
</p></li>
</ul>

<ul class="org-ul">
<li><p>
To change a file name
</p>
<pre class="example">
mv hello.c hello1.c
ls
</pre></li>
<li><p>
To make a copy
</p>
<pre class="example">
cp hello1.c hello2.c
ls
</pre></li>
<li><p>
To remove a file
</p>
<pre class="example">
rm hello1.c
ls
</pre></li>
</ul>

<ul class="org-ul">
<li><p>
To see what's in a file
</p>
<pre class="example">
cat hello2.c
</pre>
<p>
or
</p>
<pre class="example">
less hello2.c
</pre>
<p>
or
</p>
<pre class="example">
more hello2.c
</pre></li>
</ul>

<ul class="org-ul">
<li><p>
To edit a file
</p>
<pre class="example">
nano hello2.c
</pre>
<p>
or
</p>
<pre class="example">
vim hello2.c
</pre>
<p>
or
</p>
<pre class="example">
emacs hello2.c
</pre>
<p>
<code>nano</code>, <code>vim</code>, and <code>emacs</code> are the most commonly used editors in Linux.
</p></li>
</ul>

<ul class="org-ul">
<li><p>
To read the manual of a command
</p>
<pre class="example">
man ls
man mv
man rm
man cp
man man
</pre>
<p>
To find out something about <code>music player</code>
</p>
<pre class="example">
man -k music player
</pre></li>
</ul>
<ul class="org-ul">
<li><p>
The commands you have seen
</p>
<pre class="example">
pwd, ls, cd, mkdir, cat, gcc, echo
mv, cp, rm, less, more
nano, vim, emacs
man
</pre>
<p>
If you want to survive in the terminal, you have to be happy with all the above
commands.
</p></li>
</ul>

<p>
And there are a lot more to know if you want to be a hacker.
</p>
<pre class="example">
chmod, chown
info, help
file, type, which, whereis
ln, wc, sort, uniq
ps, w, top, free, du, df
ssh, scp
grep, find, pipe
tar, gzip, 7z
diff, patch
</pre>
<p>
and still more&#x2026;
</p>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">1.3</span> CLI shortcuts</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li><b>Ctrl-a</b>: beginning of line</li>
<li><b>Ctrl-e</b>: end of line</li>
<li><b>Ctrl-f</b>: forward</li>
<li><b>Ctrl-b</b>: backward</li>
<li><b>Ctrl-n</b>: next</li>
<li><b>Ctrl-p</b>: previous</li>
<li><b>Ctrl-r</b>: reverse search</li>
<li><b>Ctrl-u</b>: cut to beginning</li>
<li><b>Ctrl-k</b>: kill (cut to end)</li>
<li><b>Ctrl-y</b>: yank (paste)</li>
<li><b>Ctrl-d</b>: delete a character</li>
<li><b>TAB</b>: magic key</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">1.4</span> "&gt;", "&gt;&gt;" &#x2014; Output to a file</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li><p>
To show the current time and date on the screen, you can do:
</p>
<pre class="example">
date
</pre>
<p>
What if you do:
</p>
<pre class="example">
date &gt; file1
</pre>
<p>
See nothing on screen? Check what's in <code>file1</code>:
</p>
<pre class="example">
cat file1
</pre>
<p>
Now you see "<code>&gt;</code>" is for outputting to a file
</p></li>
</ul>

<ul class="org-ul">
<li><p>
To show a string on the screen, you can do:
</p>
<pre class="example">
echo Hello, world
</pre>
<p>
See "<code>Hello, world</code>"? Now, do:
</p>
<pre class="example">
echo 'Hello, world!' &gt;&gt; file1
cat file1
</pre>
<p>
Now you see "<code>&gt;&gt;</code>" is for appending to a file
</p>
<pre class="example">
echo 'Hello again, world!' &gt; file1
cat file1
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">1.5</span> <code>cat</code> &#x2014; concatenate files</h3>
<div class="outline-text-3" id="text-1-5">
<p>
To see what's in a file:
</p>
<pre class="example">
cat file1
</pre>
<p>
To output to a file:
</p>
<pre class="example">
cat file1 &gt; file2
cat file2
</pre>
<p>
What does the following command do?
</p>
<pre class="example">
cat file1 file2
</pre>

<p>
To append to a file:
</p>
<pre class="example">
cat file1 &gt;&gt; file2
cat file2
</pre>

<p>
To write into a file:
</p>
<pre class="example">
cat &gt; file2
</pre>
<p>
type <code>Ctrl-d</code> on a new line to quit.
</p>
<pre class="example">
cat file2
</pre>
<p>
What does the following command do?
</p>
<pre class="example">
cat &gt;&gt; file2
</pre>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6"><span class="section-number-3">1.6</span> Wildcard characters</h3>
<div class="outline-text-3" id="text-1-6">
<p>
Still following me? If so, you should have 4 files in your <code>homework</code> right now
</p>
<pre class="example">
ls
</pre>
<p>
you should see
</p>
<pre class="example">
file1  file2  hello  hello2.c
</pre>
<p>
Right?
</p>

<p>
Now, do&#x2026;
</p>
<pre class="example">
mkdir f h
ls
</pre>

<p>
Now, you should see 2 newly created directories <code>f</code> and <code>h</code>, right?
</p>
<pre class="example">
mv fi* f; mv he* h
ls
ls f
ls h
ls -R
</pre>
<p>
See what's happened?
</p>
<ul class="org-ul">
<li>"<code>*</code>" is a special character means "any number of any characters"</li>
<li><p>
"<code>fi*</code>" means every file starting with "<code>fi</code>" in its name. For example,
</p>
<ul class="org-ul">
<li><code>file</code>, <code>file1</code>, <code>file2</code>, <code>fileanything</code>, they all match "<code>fi*</code>"</li>
</ul>
<p>
Now you don't have problem with the "<code>he*</code>", right?
</p></li>
</ul>

<ul class="org-ul">
<li><p>
"<code>?</code>" is another wildcard char means "any <i>one</i> character". For example, still in
your <code>homework</code> directory, you can create some more files with the following command,
</p>
<pre class="example">
touch fa fb fc faa fbb fcc faaa fbbb fccc
</pre>
<p>
Now, you have 9 new empty files created. If you do
</p>
<pre class="example">
ls f?
</pre>
<p>
you can only see <code>fa</code>, <code>fb</code>, and <code>fc</code>. If you do
</p>
<pre class="example">
ls f??
</pre>
<p>
you can only see <code>faa</code>, <code>fbb</code>, and <code>fcc</code>.
</p>

<p>
Got the idea? Now, tell me what the following commands do
</p>
<pre class="example">
mkdir f-test
mv f? f?? f??? f-test
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">1.7</span> Understanding <code>ls -l</code></h3>
<div class="outline-text-3" id="text-1-7">
<pre class="example">
-rw------- 1  bshotts  bshotts     576 Apr 17  1998 weather.txt
drwxr-xr-x 6  bshotts  bshotts    1024 Oct  9  1999 web_page
-rw-rw-r-- 1  bshotts  bshotts  276480 Feb 11 20:41 web_site.tar
-rw------- 1  bshotts  bshotts    5743 Dec 16  1998 xmas_file.txt
__________ _  _______  _______  ______ ____________ _____________
|    |     |     |        |       |         |             |
|    |     |     |        |       |         |         File Name
|    |     |     |        |       |         |
|    |     |     |        |       |         +---  Modification Time
|    |     |     |        |       |
|    |     |     |        |       +-------------  Size (in bytes)
|    |     |     |        |
|    |     |     |        +---------------------  Group
|    |     |     |
|    |     |     +------------------------------  Owner
|    |     |
|    |     +------------------------------------  Number of hard links
|    |
|    +------------------------------------------  File Permissions
|
+-----------------------------------------------  File types
</pre>
</div>

<div id="outline-container-orgheadline7" class="outline-4">
<h4 id="orgheadline7"><span class="section-number-4">1.7.1</span> File types</h4>
<div class="outline-text-4" id="text-1-7-1">
<ul class="org-ul">
<li>"<code>d</code>" &#x2014; directory</li>
<li>"<code>-</code>" &#x2014; regular file</li>
<li>"<code>l</code>" &#x2014; soft link</li>
<li>"<code>c</code>" &#x2014; character device</li>
<li>"<code>b</code>" &#x2014; block device</li>
<li>"<code>s</code>" &#x2014; socket</li>
<li>"<code>p</code>" &#x2014; named pipe (FIFO)</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8"><span class="section-number-4">1.7.2</span> File modes</h4>
<div class="outline-text-4" id="text-1-7-2">
<pre class="example">
drwxr-xr-x 2 wx672 wx672 4096 Sep 26 17:59 f/
drwxr-xr-x 2 wx672 wx672 4096 Sep 26 20:49 f-test/
drwxr-xr-x 2 wx672 wx672 4096 Sep 26 18:00 h/
 └┴┘└┴┘└┴┘
  |  |  |
  |  |  |
  |  |  +--- Other's permission
  |  +------ Group's permission
  +--------- Owner's permission
</pre>
<ul class="org-ul">
<li>"<code>rwx</code>" &#x2014; readable, writable, executable</li>
<li>"<code>r-x</code>" &#x2014; readable, not writable, executable</li>
<li>"<code>r--</code>" &#x2014; readable, not writable, not executable</li>
<li>"<code>---</code>" &#x2014; not readable, not writable, not executable</li>
</ul>

<ul class="org-ul">
<li><p>
<code>chmod</code> &#x2014; change <i>file modes</i>
</p>
<pre class="example">
chmod 777 f &amp;&amp; ls -l f
chmod 700 f &amp;&amp; ls -l f
chmod 600 f &amp;&amp; ls -l f
chmod 000 f &amp;&amp; ls -l f
chmod 755 f &amp;&amp; ls -l f
chmod a+rwx f &amp;&amp; ls -l f
chmod a-rwx f &amp;&amp; ls -l f
chmod go-rwx f  &amp;&amp; ls -l f
chmod u+x f &amp;&amp; ls -l f
</pre></li>
<li><p>
Know the meanings of the numbers
</p>
<pre class="example">
rwxr-xr-x  rwxrwxrwx  rwx------  rw-r--r--
---~~~---  ---~~~---  ---~~~---  ---~~~---
111101101  111111111  111000000  110100100 --- binary
---~~~---  ---~~~---  ---~~~---  ---~~~---
 7  5  5    7  7  7    7  0  0    6  4  4  --- decimal
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">1.8</span> Shell variables</h3>
<div class="outline-text-3" id="text-1-8">
<pre class="example">
echo $PATH
echo $PWD
echo $HOME
echo $USER
</pre>
<ul class="org-ul">
<li>"<code>$</code>" &#x2014; Get the value of the variable. For example,
<ul class="org-ul">
<li>"<code>$a</code>" is to get the value of variable "<code>a</code>";</li>
<li>"<code>$PATH</code>" is to get the value of variable "<code>PATH</code>".</li>
</ul></li>
</ul>
</div>

<div id="outline-container-orgheadline10" class="outline-4">
<h4 id="orgheadline10"><span class="section-number-4">1.8.1</span> PATH</h4>
<div class="outline-text-4" id="text-1-8-1">
<pre class="example">
echo $PATH
PATH="./:$PATH" # Assign a new value to PATH
echo $PATH
</pre>
<p>
Now you know how to change the value of a variable.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">1.9</span> Background and foreground jobs</h3>
<div class="outline-text-3" id="text-1-9">
<ul class="org-ul">
<li><p>
To run a command in the background
</p>
<pre class="example">
emacs &amp;
google-chrome &amp;
</pre>
<p>
Show background jobs:
</p>
<pre class="example">
jobs
</pre></li>
<li><p>
To push a foreground process into background
</p>
<pre class="example">
Ctrl-Z
bg %1
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16"><span class="section-number-3">1.10</span> Special files</h3>
<div class="outline-text-3" id="text-1-10">
</div><div id="outline-container-orgheadline13" class="outline-4">
<h4 id="orgheadline13"><span class="section-number-4">1.10.1</span> <code>/dev/null</code> &#x2014; A black hole!</h4>
<div class="outline-text-4" id="text-1-10-1">
<pre class="example">
ls  &gt;  /dev/null
echo hello &gt; /dev/null
</pre>
<p>
You can output error messages into <code>/dev/null</code>. For example, if you do
</p>
<pre class="example">
cat no-this-file
</pre>
<p>
you will see an error message saying:
</p>
<pre class="example">
cat: no-this-file: No such file or directory
</pre>
<p>
If you do
</p>
<pre class="example">
cat no-this-file 2&gt;  /dev/null
</pre>
<p>
the error message will go into the black hole &#x2014; <code>/dev/null</code>.
</p>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14"><span class="section-number-4">1.10.2</span> <code>/dev/zero</code> &#x2014; A zero generator</h4>
<div class="outline-text-4" id="text-1-10-2">
<pre class="example">
dd if=/dev/zero of=/tmp/testfile bs=1k count=1000
</pre>
<p>
This command will create a 1000KiB-sized file with nothing in it!
</p>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">1.10.3</span> <code>/dev/random</code> &#x2014; A random number generator</h4>
<div class="outline-text-4" id="text-1-10-3">
<pre class="example">
echo $(( `od -An -N2 -i /dev/random` % 1000 ))
</pre>
<p>
This command is to generate a random decimal number which is smaller than 1000.
</p>
<ul class="org-ul">
<li><p>
"<code>$((...))</code>" &#x2014; is for math calculation. For example,
</p>
<pre class="example">
echo $((1+2))
</pre>
<p>
will give you "3".
</p></li>
<li><p>
"<code>`...`</code>" &#x2014; The things between the quote (<code>`</code>) pair must be commands. For
example,
</p>
<pre class="example">
echo `ls`
</pre>
<p>
The output of "<code>ls</code>" will be passed to <code>echo</code>.
</p></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17"><span class="section-number-3">1.11</span> Pipe &#x2014; Chaining commands together</h3>
<div class="outline-text-3" id="text-1-11">
<pre class="example">
man ls | head
man ls | head | tail -3
cat file1 | head -20 | tee file5
</pre>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18"><span class="section-number-3">1.12</span> Single-quotes and double-quotes</h3>
<div class="outline-text-3" id="text-1-12">
<pre class="example">
a=alpha;  b="$a";  c='$a'
echo  a  b  c
echo  $a $b $c
echo '$a $b $c'
echo "$a $b $c"
</pre>
<ul class="org-ul">
<li>The special character between single quotes ('&#x2026;') will be printed as it is.</li>
<li>The special character between double quotes ("&#x2026;") will be expended by bash.</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">1.13</span> Soft links and hard links</h3>
<div class="outline-text-3" id="text-1-13">
<p>
Still in your <code>homework</code> directory? Do:
</p>
<pre class="example">
cd f-test; ls
</pre>
<p>
You should see the 9 useless files sitting there, right?
</p>

<p>
Now, let's make a symbolic link of file <code>fa</code>, do:
</p>
<pre class="example">
ln -s fa fA &amp;&amp; ls -l f?
</pre>
<p>
You should see something like this:
</p>
<pre class="example">
-rw-r--r-- 1 wx672 wx672 0 Sep 26 20:49 fa
lrwxrwxrwx 1 wx672 wx672 2 Sep 27 18:45 fA -&gt; fa
</pre>
<p>
This means <code>fA</code> is a symbolic link of <code>fa</code>. Now do:
</p>
<pre class="example">
echo I am fa &gt; fa  # write something into 'fa'
cat fA
</pre>
<p>
Got the idea? A symbolic link (or soft link) is just like another name of a file.
</p>

<p>
Now, let's try a hard link
</p>
<pre class="example">
ln fa fAA; ls -li fa fA fAA
</pre>
<p>
You should see:
</p>
<pre class="example">
8916937 -rw-r--r-- 2 wx672 wx672 8 Sep 26 20:49 fa
8916955 lrwxrwxrwx 1 wx672 wx672 2 Sep 27 18:45 fA -&gt; fa
8916937 -rw-r--r-- 2 wx672 wx672 8 Sep 26 20:49 fAA
-------            -             -
   |               |             |
   |               |             +--- File size
   |               +----------------- Number of hard links
   +--------------------------------- Inode number
</pre>
<p>
A file is like a person
</p>
<ul class="org-ul">
<li>Every people can have a lot of names, but he can have only one unique ID number.</li>
<li>Every file can have a lot of names, but it can have only one unique ID number.
<ul class="org-ul">
<li><code>fa</code> and <code>fAA</code> are the same file, while</li>
<li><code>fA</code> is another file linking to <code>fa</code>.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20"><span class="section-number-3">1.14</span> finding a file</h3>
<div class="outline-text-3" id="text-1-14">
<ul class="org-ul">
<li><p>
Within your HOME directory (<code>~</code>), find a file named '<code>fa</code>':
</p>
<pre class="example">
find ~ -name fa
</pre></li>
<li><p>
In <code>/etc</code> directory, find all the directories that named "<code>rc*</code>"
</p>
<pre class="example">
find  /etc  -type d -name "rc*"
</pre></li>
<li><p>
In your HOME, find all the files that named "<code>*~</code>", and delete them
</p>
<pre class="example">
find ~ -name "*~" | xargs rm
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21"><span class="section-number-3">1.15</span> grep &#x2014; finding matching lines in files</h3>
<div class="outline-text-3" id="text-1-15">
<ul class="org-ul">
<li><p>
In file <code>/etc/passwd</code>, to find out the lines that have the string "<code>stud</code>" in it
</p>
<pre class="example">
grep stud /etc/passwd
</pre></li>
<li><p>
What the following command do?
</p>
<pre class="example">
man cp | grep -B2 -A2 recur
</pre>
<p>
you can "<code>man grep</code>" to find out the answer.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22"><span class="section-number-3">1.16</span> Command alias</h3>
<div class="outline-text-3" id="text-1-16">
<pre class="example">
alias
alias la='ls -a'
alias rm='rm -i'
which rm
</pre>
</div>
</div>

<div id="outline-container-orgheadline26" class="outline-3">
<h3 id="orgheadline26"><span class="section-number-3">1.17</span> <code>STDIN</code>, <code>STDOUT</code>, <code>STDERR</code>, and redirection (<code>&gt;</code>, <code>&gt;&gt;</code>, <code>&lt;</code>)</h3>
<div class="outline-text-3" id="text-1-17">
<ul class="org-ul">
<li><code>STDIN</code>: keyboard input</li>
<li><code>STDOUT</code>: screen output</li>
<li><code>STDERR</code>: standard error, also output to screen</li>
</ul>
</div>

<div id="outline-container-orgheadline23" class="outline-4">
<h4 id="orgheadline23"><span class="section-number-4">1.17.1</span> Redirect <code>STDOUT</code> to a file</h4>
<div class="outline-text-4" id="text-1-17-1">
<p>
Rather than output to screen (<code>STDOUT</code>), you can output to a file. For example
</p>
<pre class="example">
ls  &gt;  listing
</pre>
<p>
In this case, the output of <code>ls</code> is redirected to a file <code>listing</code>. This is called
"output redirection".
</p>

<p>
More examples:
</p>
<pre class="example">
cat  listing  &gt;  listing2
cat  listing*  &gt;  listing3
cat  listing* &gt;&gt; listing3
</pre>
</div>
</div>

<div id="outline-container-orgheadline24" class="outline-4">
<h4 id="orgheadline24"><span class="section-number-4">1.17.2</span> Redirect <code>STDIN</code> from a file</h4>
<div class="outline-text-4" id="text-1-17-2">
<p>
Have you ever tried:
</p>
<pre class="example">
cat
Hello, world!
Ctrl-d
</pre>
<p>
What happened is:
</p>
<ol class="org-ol">
<li>After typing "<code>cat</code>" followed by <code>ENTER</code>, <code>cat</code> starts running, and expects your
keyboard input (standard input);</li>
<li>You key in "<code>Hello, world!</code>" (standard input);</li>
<li><code>cat</code> reads from standard input (<code>STDIN</code>), and display it to <code>STDOUT</code>;</li>
<li>You see another line of <code>Hello, world!</code> on the screen (standard output);</li>
<li>You type "<code>Ctrl-d</code>" to quit from input.</li>
</ol>

<p>
You don't have to always input from keyboard. For example,
</p>
<pre class="example">
cat &lt; listing
</pre>
<p>
In this case, rather than gets input from <code>STDIN</code>, <code>cat</code> gets input from a file
"<code>listing</code>". This is called "input redirection".
</p>

<div class="org-src-container">

<pre class="src src-shell-script"><span class="linenr">1: </span><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span class="linenr">2: </span><span style="color: #F0DFAF; font-weight: bold;">while  </span><span style="color: #DCDCCC; font-weight: bold;">read</span>  LINE
<span class="linenr">3: </span><span style="color: #F0DFAF; font-weight: bold;">do</span>
<span class="linenr">4: </span>  <span style="color: #F0DFAF; font-weight: bold;">case</span>  $<span style="color: #DFAF8F;">LINE</span> <span style="color: #F0DFAF; font-weight: bold;"> in</span>
<span class="linenr">5: </span>  *root*)  <span style="color: #DCDCCC; font-weight: bold;">echo</span>  $<span style="color: #DFAF8F;">LINE</span> ;;
<span class="linenr">6: </span>  *stud*)  <span style="color: #DCDCCC; font-weight: bold;">echo</span>  $<span style="color: #DFAF8F;">LINE</span> ;;
<span class="linenr">7: </span>       *)  <span style="color: #DCDCCC; font-weight: bold;">echo</span>  <span style="color: #CC9393;">"I don't care."</span> ;;
<span class="linenr">8: </span>  <span style="color: #F0DFAF; font-weight: bold;">esac</span>
<span class="linenr">9: </span><span style="color: #F0DFAF; font-weight: bold;">done</span> &lt; /etc/passwd
</pre>
</div>

<p>
See "<code>&lt; /etc/passwd</code>"? This means the small <code>while</code> loop gets input from the file
<code>/etc/passwd</code>.
</p>
</div>
</div>

<div id="outline-container-orgheadline25" class="outline-4">
<h4 id="orgheadline25"><span class="section-number-4">1.17.3</span> Redirect <code>STDERR</code> into a file</h4>
<div class="outline-text-4" id="text-1-17-3">
<p>
If you do:
</p>
<pre class="example">
ls asfdsadsdasfdf
</pre>
<p>
Most probably you will see an error message like this:
</p>
<pre class="example">
/bin/ls: cannot access 'asfdsadsdasfdf': No such file or directory
</pre>
<p>
If you don't want the error message is displayed on the screen, you can save it to a
file. For example,
</p>
<pre class="example">
ls asfdsadsdasfdf 2&gt; errorlog
cat errorlog
</pre>

<p>
Usually, both <code>STDERR</code> and <code>STDOUT</code> are output to the screen.
</p>

<ul class="org-ul">
<li><p>
If you do, for example,
</p>
<pre class="example">
ls sdadsdssdf / &gt; log
</pre>
<ul class="org-ul">
<li>The content of the root directory (<code>/</code>) will go into the file "<code>log</code>", while</li>
<li>The error message will be displayed on the screen.</li>
</ul></li>

<li><p>
If you want both <code>STDERR</code> and <code>STDOUT</code> go into "<code>log</code>" file, you can do:
</p>
<pre class="example">
ls sdadsdssdf / &amp;&gt; log
</pre></li>
<li><p>
If you want only <code>STDERR</code> goes into <code>log</code> file, you should do:
</p>
<pre class="example">
ls sdadsdssdf / 2&gt; log
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-3">
<h3 id="orgheadline27"><span class="section-number-3">1.18</span> Initial files</h3>
<div class="outline-text-3" id="text-1-18">
<ul class="org-ul">
<li><p>
<code>.bashrc</code>, <code>.bash_profile</code>, <code>.profile</code>
</p>
<pre class="example">
vim .bashrc
source .bashrc
. .bashrc
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline28" class="outline-3">
<h3 id="orgheadline28"><span class="section-number-3">1.19</span> tar</h3>
<div class="outline-text-3" id="text-1-19">
<pre class="example">
tar  cvf  myarchive.tar  /etc/termcap  /etc/passwd
tar  tvf  myarchive.tar
tar  xvf  myarchive.tar
</pre>
<p>
With compression:
</p>
<pre class="example">
tar  zcvf  myarchive.tgz  /etc/termcap  /etc/passwd
tar  zxvf  myarchive.tgz
tar  ztvf  myarchive.tgz
</pre>
</div>
</div>

<div id="outline-container-orgheadline29" class="outline-3">
<h3 id="orgheadline29"><span class="section-number-3">1.20</span> gzip</h3>
<div class="outline-text-3" id="text-1-20">
<pre class="example">
gzip file1
zcat file1.gz
gunzip file1.gz
</pre>
</div>
</div>

<div id="outline-container-orgheadline30" class="outline-3">
<h3 id="orgheadline30"><span class="section-number-3">1.21</span> Process info</h3>
<div class="outline-text-3" id="text-1-21">
<pre class="example">
ps
ps aux
top
top -b -n1 | grep bash
w
kill
</pre>
</div>
</div>
<div id="outline-container-orgheadline31" class="outline-3">
<h3 id="orgheadline31"><span class="section-number-3">1.22</span> System info</h3>
<div class="outline-text-3" id="text-1-22">
<pre class="example">
mount
uname -a
dmesg
lspci
lsusb
lsmod
</pre>
</div>
</div>

<div id="outline-container-orgheadline32" class="outline-3">
<h3 id="orgheadline32"><span class="section-number-3">1.23</span> Job scheduling</h3>
<div class="outline-text-3" id="text-1-23">
<ul class="org-ul">
<li><p>
<code>at</code>
</p>
<pre class="example">
at  11:00
at&gt;  date &gt;&gt; $HOME/date.out
at&gt;  type CTRL-D to quit
at -l
</pre></li>
</ul>

<ul class="org-ul">
<li><p>
<code>crontab</code>
</p>
<pre class="example">
crontab -e
*/2 * * * * date  &gt;&gt;  $HOME/date.out
crontab -l
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-3">
<h3 id="orgheadline33"><span class="section-number-3">1.24</span> Networking</h3>
<div class="outline-text-3" id="text-1-24">
<ul class="org-ul">
<li><code>ifconfig</code>, <code>dhclient</code>, <code>ifup/down</code>, <code>ping</code>, <code>route</code>, <code>arp</code>, <code>netstat</code></li>
<li><code>ip</code></li>
<li><code>ssh</code>, <code>scp</code>, <code>rsync</code>, <code>nc</code>, <code>aria2c</code></li>
<li><code>tcpdump</code>, <code>nmap</code></li>
<li><code>iptables</code></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline48" class="outline-2">
<h2 id="orgheadline48"><span class="section-number-2">2</span> Bash Programming Examples</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline35" class="outline-3">
<h3 id="orgheadline35"><span class="section-number-3">2.1</span> Shabang</h3>
<div class="outline-text-3" id="text-2-1">
<pre class="example">
#!/bin/sh
#!/bin/bash
#!/usr/bin/python
#!/usr/bin/php
</pre>
</div>
</div>

<div id="outline-container-orgheadline36" class="outline-3">
<h3 id="orgheadline36"><span class="section-number-3">2.2</span> <code>for</code> VAR <code>in</code> LIST; <code>do</code> SOMETHING; <code>done</code></h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">for</span> ((<span style="color: #DFAF8F;">i</span>=1;i&lt;6;i++)); <span style="color: #F0DFAF; font-weight: bold;">do </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">i</span>; <span style="color: #F0DFAF; font-weight: bold;">done</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> i<span style="color: #F0DFAF; font-weight: bold;"> in</span> 1 2 3 4 5; <span style="color: #F0DFAF; font-weight: bold;">do </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">i</span>; <span style="color: #F0DFAF; font-weight: bold;">done</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> i<span style="color: #F0DFAF; font-weight: bold;"> in</span> <span style="color: #CC9393;">`seq 1 5`</span>; <span style="color: #F0DFAF; font-weight: bold;">do </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">i</span>; <span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">for</span> i<span style="color: #F0DFAF; font-weight: bold;"> in</span> 1 2 3 4 5; <span style="color: #F0DFAF; font-weight: bold;">do </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> $((i*i)); <span style="color: #F0DFAF; font-weight: bold;">done</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> ((<span style="color: #DFAF8F;">i</span>=1;i&lt;6;i++)); <span style="color: #F0DFAF; font-weight: bold;">do </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> $((i*i)); <span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">for</span> i<span style="color: #F0DFAF; font-weight: bold;"> in</span> 1 2 3 4 5; <span style="color: #F0DFAF; font-weight: bold;">do</span> <span style="color: #DFAF8F;">j</span>=$((i*i)); <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">i</span> $<span style="color: #DFAF8F;">j</span>; <span style="color: #F0DFAF; font-weight: bold;">done</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> ((<span style="color: #DFAF8F;">i</span>=1;i&lt;6;i++)); <span style="color: #F0DFAF; font-weight: bold;">do</span> <span style="color: #DFAF8F;">j</span>=$((i*i)); <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">i</span> $<span style="color: #DFAF8F;">j</span>; <span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span class="linenr">1: </span><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span class="linenr">2: </span><span style="color: #F0DFAF; font-weight: bold;">for</span> f<span style="color: #F0DFAF; font-weight: bold;"> in</span> /home/students/*
<span class="linenr">3: </span><span style="color: #F0DFAF; font-weight: bold;">do</span>
<span class="linenr">4: </span>  du -cks $<span style="color: #DFAF8F;">f</span> | grep -v total
<span class="linenr">5: </span><span style="color: #F0DFAF; font-weight: bold;">done</span> | sort -n | tail -10
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">for</span> f<span style="color: #F0DFAF; font-weight: bold;"> in</span> *jpg
<span style="color: #F0DFAF; font-weight: bold;">do</span>
convert $<span style="color: #DFAF8F;">f</span> -resize 1280x <span style="color: #CC9393;">\</span>
           -gravity center <span style="color: #CC9393;">\</span>
           -crop 1280x768+0+0 <span style="color: #CC9393;">\</span>
           <span style="color: #CC9393;">`basename $f .jpg`</span>-1280x768.jpg
<span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline40" class="outline-3">
<h3 id="orgheadline40"><span class="section-number-3">2.3</span> <code>if</code> TEST; <code>then</code> COMMANDS; <code>else</code> OTHERCOMMANDS; <code>fi</code></h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-orgheadline37" class="outline-4">
<h4 id="orgheadline37"><span class="section-number-4">2.3.1</span> Comparisons</h4>
<div class="outline-text-4" id="text-2-3-1">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">if</span> [ $<span style="color: #DFAF8F;">a</span> -lt 10 ];   <span style="color: #F0DFAF; font-weight: bold;">then</span> <span style="color: #DFAF8F;">a</span>=$(($<span style="color: #DFAF8F;">a</span>+1)); <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">a</span>; <span style="color: #F0DFAF; font-weight: bold;">else </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"a is too large."</span>; <span style="color: #F0DFAF; font-weight: bold;">fi</span>

<span style="color: #F0DFAF; font-weight: bold;">if</span> [[ $<span style="color: #DFAF8F;">a</span> -lt 10 ]]; <span style="color: #F0DFAF; font-weight: bold;">then</span> <span style="color: #DFAF8F;">a</span>=$(($<span style="color: #DFAF8F;">a</span>+1)); <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">a</span>; <span style="color: #F0DFAF; font-weight: bold;">else </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"a is too large."</span>; <span style="color: #F0DFAF; font-weight: bold;">fi</span>

<span style="color: #F0DFAF; font-weight: bold;">if</span> ((<span style="color: #CC9393;">"$a"</span> &lt; 10));   <span style="color: #F0DFAF; font-weight: bold;">then</span> <span style="color: #DFAF8F;">a</span>=$(($<span style="color: #DFAF8F;">a</span>+1)); <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">a</span>; <span style="color: #F0DFAF; font-weight: bold;">else </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"a is too large."</span>; <span style="color: #F0DFAF; font-weight: bold;">fi</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">This is a simple string comparision script.</span>
<span style="color: #5F7F5F;">#</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">1. Use '[[' instead of '[' whenever possible.</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">2. Don't use '[  ]' with '&lt;', '&gt;'.</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">3. '-eq -le -ge -lt -gt' are for arithmetic comparisons</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">4. '&lt; &gt;' for string comparisons</span>
<span style="color: #5F7F5F;">#</span>
<span style="color: #F0DFAF; font-weight: bold;">if</span> [ -z <span style="color: #CC9393;">"$2"</span> ]; <span style="color: #F0DFAF; font-weight: bold;">then</span>
    <span style="color: #DCDCCC; font-weight: bold;">echo</span> Usage: $<span style="color: #DFAF8F;">0</span> <span style="color: #CC9393;">'&lt;string1&gt; &lt;string2&gt;'</span>
<span style="color: #F0DFAF; font-weight: bold;">elif</span> [[ <span style="color: #CC9393;">"$1"</span> &gt; <span style="color: #CC9393;">"$2"</span> ]]; <span style="color: #F0DFAF; font-weight: bold;">then</span>
    <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">1</span> is bigger than $<span style="color: #DFAF8F;">2</span>.
<span style="color: #F0DFAF; font-weight: bold;">elif</span> [[ <span style="color: #CC9393;">"$1"</span> = <span style="color: #CC9393;">"$2"</span> ]]; <span style="color: #F0DFAF; font-weight: bold;">then</span>
    <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">1</span> is equal to $<span style="color: #DFAF8F;">2</span>.
<span style="color: #F0DFAF; font-weight: bold;">else</span>
    <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">1</span> is smaller than $<span style="color: #DFAF8F;">2</span>.
<span style="color: #F0DFAF; font-weight: bold;">fi</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">if</span> [[ $(<span style="color: #CC9393;">ls</span> | wc -l) -gt 10 ]]; <span style="color: #F0DFAF; font-weight: bold;">then </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"messy!"</span>; <span style="color: #F0DFAF; font-weight: bold;">else </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"clean!"</span>; <span style="color: #F0DFAF; font-weight: bold;">fi</span>
</pre>
</div>
<ul class="org-ul">
<li><a href="http://www.tldp.org/LDP/abs/html/comparison-ops.html">Other Comparison Operators</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline38" class="outline-4">
<h4 id="orgheadline38"><span class="section-number-4">2.3.2</span> Test exit status</h4>
<div class="outline-text-4" id="text-2-3-2">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #F0DFAF; font-weight: bold;">for</span> f<span style="color: #F0DFAF; font-weight: bold;"> in</span> *.sh
<span style="color: #F0DFAF; font-weight: bold;">do</span>
    <span style="color: #F0DFAF; font-weight: bold;">if</span> grep -q while $<span style="color: #DFAF8F;">f</span>; <span style="color: #F0DFAF; font-weight: bold;">then</span>
        <span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"$f: while loop found\!"</span>
    <span style="color: #F0DFAF; font-weight: bold;">else</span>
        <span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"$f: no while loop."</span>
    <span style="color: #F0DFAF; font-weight: bold;">fi</span>
<span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline39" class="outline-4">
<h4 id="orgheadline39"><span class="section-number-4">2.3.3</span> See your <code>.bash_profile</code></h4>
<div class="outline-text-4" id="text-2-3-3">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">include .bashrc if it exists</span>
<span style="color: #F0DFAF; font-weight: bold;">if</span> [ -f ~/.bashrc ]; <span style="color: #F0DFAF; font-weight: bold;">then</span>
   <span style="color: #DCDCCC; font-weight: bold;">.</span> ~/.bashrc
<span style="color: #F0DFAF; font-weight: bold;">fi</span>
<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">set PATH so it includes user's private bin if it exists</span>
<span style="color: #F0DFAF; font-weight: bold;">if</span> [ -d ~/bin ] ; <span style="color: #F0DFAF; font-weight: bold;">then</span>
   <span style="color: #DFAF8F;">PATH</span>=~/bin:<span style="color: #CC9393;">"${PATH}"</span>
<span style="color: #F0DFAF; font-weight: bold;">fi</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline42" class="outline-3">
<h3 id="orgheadline42"><span class="section-number-3">2.4</span> <code>while</code> CONDITION; <code>do</code> SOMETHING; <code>done</code></h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">while</span> true; <span style="color: #F0DFAF; font-weight: bold;">do</span> mpg123 song.mp3; <span style="color: #F0DFAF; font-weight: bold;">done</span>

<span style="color: #F0DFAF; font-weight: bold;">while</span> true; <span style="color: #F0DFAF; font-weight: bold;">do</span> mpg123 <span style="color: #CC9393;">`find ~/ -iname "*.mp3"`</span>; <span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #DFAF8F;">x</span>=0 
<span style="color: #F0DFAF; font-weight: bold;">while</span> [ $<span style="color: #DFAF8F;">x</span> -lt 10 ]      <span style="color: #5F7F5F;">#  </span><span style="color: #7F9F7F;">[ ]</span>
<span style="color: #F0DFAF; font-weight: bold;">do</span> 
    <span style="color: #DFAF8F;">y</span>=$<span style="color: #DFAF8F;">x</span> 
    <span style="color: #F0DFAF; font-weight: bold;">while</span> [[ $<span style="color: #DFAF8F;">y</span> -ge 0 ]]   <span style="color: #5F7F5F;">#  </span><span style="color: #7F9F7F;">[[ ]]</span>
    <span style="color: #F0DFAF; font-weight: bold;">do</span> 
        <span style="color: #DCDCCC; font-weight: bold;">echo</span> -n $<span style="color: #DFAF8F;">y</span>         <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">no newline</span>
        <span style="color: #DFAF8F;">y</span>=$((y-1))         <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">y--</span>
    <span style="color: #F0DFAF; font-weight: bold;">done</span> 
    <span style="color: #DCDCCC; font-weight: bold;">echo</span> 
    <span style="color: #DFAF8F;">x</span>=<span style="color: #CC9393;">`echo "$x + 1" | bc`</span> <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">x++</span>
<span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-4">
<h4 id="orgheadline41"><span class="section-number-4">2.4.1</span> <code>read</code> &#x2014; Read a line from STDIN</h4>
<div class="outline-text-4" id="text-2-4-1">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #F0DFAF; font-weight: bold;">while </span><span style="color: #DCDCCC; font-weight: bold;">read</span> LINE; <span style="color: #F0DFAF; font-weight: bold;">do </span><span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"what I typed is: $LINE"</span>; <span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #F0DFAF; font-weight: bold;">while </span><span style="color: #DCDCCC; font-weight: bold;">read</span> LINE
<span style="color: #F0DFAF; font-weight: bold;">do</span>
    <span style="color: #F0DFAF; font-weight: bold;">case</span> $<span style="color: #DFAF8F;">LINE</span><span style="color: #F0DFAF; font-weight: bold;"> in</span>  
        *root*) <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">LINE</span> ;;
        *stud*) <span style="color: #DCDCCC; font-weight: bold;">echo</span> $<span style="color: #DFAF8F;">LINE</span> ;;
        *) <span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"I don't care."</span> ;;
    <span style="color: #F0DFAF; font-weight: bold;">esac</span> 
<span style="color: #F0DFAF; font-weight: bold;">done</span> &lt; /etc/passwd
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43"><span class="section-number-3">2.5</span> <code>case</code> VAR <code>in</code> PATTERN) COMMANDS ;; <code>esac</code></h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #DCDCCC; font-weight: bold;">printf</span> <span style="color: #CC9393;">"Play a game?"</span> 
<span style="color: #DCDCCC; font-weight: bold;">read</span> YN 
<span style="color: #F0DFAF; font-weight: bold;">case</span> $<span style="color: #DFAF8F;">YN</span><span style="color: #F0DFAF; font-weight: bold;"> in</span> 
  [yY]|[yY][eE][sS]) <span style="color: #F0DFAF; font-weight: bold;">exec</span> bb ;; 
                  *) <span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"Maybe later."</span> ;; 
<span style="color: #F0DFAF; font-weight: bold;">esac</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #DFAF8F;">YN</span>=yes 
<span style="color: #DCDCCC; font-weight: bold;">printf</span> <span style="color: #CC9393;">"Play a game?[$YN]"</span> 
<span style="color: #DCDCCC; font-weight: bold;">read</span> YN 
: ${<span style="color: #DFAF8F;">YN</span>:=yes}
<span style="color: #F0DFAF; font-weight: bold;">case</span> $<span style="color: #DFAF8F;">YN</span><span style="color: #F0DFAF; font-weight: bold;"> in</span> 
  [yY]|[yY][eE][sS]) <span style="color: #F0DFAF; font-weight: bold;">exec</span> bb ;; 
                  *) <span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"Maybe later."</span> ;; 
<span style="color: #F0DFAF; font-weight: bold;">esac</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline44" class="outline-3">
<h3 id="orgheadline44"><span class="section-number-3">2.6</span> Command line arguments (<code>$0, $1, $2...</code>, <code>$#, $@</code>)</h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">
<label class="org-src-name">An example C program:</label>
<pre class="src src-c"><span style="color: #94BFF3;">#include</span> <span style="color: #CC9393;">&lt;stdio.h&gt;</span>

<span style="color: #7CB8BB;">int</span> <span style="color: #93E0E3;">main</span>(<span style="color: #7CB8BB;">int</span> <span style="color: #DFAF8F;">argc</span>, <span style="color: #7CB8BB;">char</span> *<span style="color: #DFAF8F;">argv</span>[])
{
  <span style="color: #7CB8BB;">int</span> <span style="color: #DFAF8F;">i</span>;
  printf(<span style="color: #CC9393;">"You said:\n\t"</span>);

  <span style="color: #F0DFAF; font-weight: bold;">for</span>(i=1; i&lt;argc; i++)
    printf(<span style="color: #CC9393;">"%s "</span>,argv[i]);

  printf(<span style="color: #CC9393;">"\n\n\targc = %d\n"</span>, argc);

  <span style="color: #F0DFAF; font-weight: bold;">for</span>(i=0; i&lt;argc; i++)
    printf(<span style="color: #CC9393;">"\targv[%d] = %s\n"</span>,i,argv[i]);

  <span style="color: #F0DFAF; font-weight: bold;">return</span> 0;
}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name">An equivalent bash script:</label>
<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>

<span style="color: #DCDCCC; font-weight: bold;">echo</span> <span style="color: #CC9393;">"You said:"</span>

<span style="color: #DCDCCC; font-weight: bold;">echo</span> -e <span style="color: #CC9393;">"\t$@"</span>
<span style="color: #DCDCCC; font-weight: bold;">echo</span>
<span style="color: #DCDCCC; font-weight: bold;">echo</span> -e <span style="color: #CC9393;">"\targc = $#"</span>
<span style="color: #DCDCCC; font-weight: bold;">echo</span> -e <span style="color: #CC9393;">"\targv[0] = $0"</span>

<span style="color: #DFAF8F;">i</span>=1
<span style="color: #F0DFAF; font-weight: bold;">for</span> arg<span style="color: #F0DFAF; font-weight: bold;"> in</span> $<span style="color: #DFAF8F;">@</span>; <span style="color: #F0DFAF; font-weight: bold;">do</span>
    <span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">printf "arg[$i] is %s\n" "$arg"</span>
    <span style="color: #DCDCCC; font-weight: bold;">echo</span> -e <span style="color: #CC9393;">"\targv[$i] = $arg"</span>
    <span style="color: #DCDCCC; font-weight: bold;">let</span> i++
<span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline45" class="outline-3">
<h3 id="orgheadline45"><span class="section-number-3">2.7</span> Arrays</h3>
<div class="outline-text-3" id="text-2-7">
<p>
Set random wallpaper:
</p>
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #5F7F5F;">### </span><span style="color: #7F9F7F;">demonstrate ARRAY and RANDOM ###</span>

<span style="color: #DFAF8F;">files</span>=($<span style="color: #DFAF8F;">HOME</span>/pics/2009summer/wallpapers/2009summer-1280x768/*.jpg)

<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">get the length of array ${files[@]}</span>
<span style="color: #DFAF8F;">n</span>=${#<span style="color: #DFAF8F;">files</span>[@]}

<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">get a random array element</span>
<span style="color: #DFAF8F;">wallpaper</span>=<span style="color: #CC9393;">"${files[RANDOM % n]}"</span>

<span style="color: #5F7F5F;"># </span><span style="color: #7F9F7F;">set it as wallpaper</span>
qiv -z $<span style="color: #DFAF8F;">wallpaper</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline46" class="outline-3">
<h3 id="orgheadline46"><span class="section-number-3">2.8</span> GUI</h3>
<div class="outline-text-3" id="text-2-8">
<div class="org-src-container">

<pre class="src src-shell-script"><span style="color: #5F7F5F;">#</span><span style="color: #7F9F7F;">!/bin/</span><span style="color: #F0DFAF; font-weight: bold;">bash</span>
<span style="color: #F0DFAF; font-weight: bold;">while</span> <span style="color: #DFAF8F;">NAME</span>=<span style="color: #CC9393;">`zenity --entry --text="Your name?"`</span> 
<span style="color: #F0DFAF; font-weight: bold;">do</span>
    zenity --info --text=<span style="color: #CC9393;">"Hello, $NAME\!"</span>
<span style="color: #F0DFAF; font-weight: bold;">done</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline47" class="outline-3">
<h3 id="orgheadline47"><span class="section-number-3">2.9</span> <code>/etc/init.d/*</code></h3>
<div class="outline-text-3" id="text-2-9">
<p>
Check files in <code>/etc/init.d/</code> directory to see how shell scripts can be used seriously.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: WANG Xiaolin</p>
<p class="date">Created: 2016-09-28 Wed 15:59</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.3.4)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
